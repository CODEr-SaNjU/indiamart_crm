
{% load crispy_forms_tags %}

{% block content %}
{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'css/Header.css' %}">
<link rel="stylesheet" type="text/css" href="/static/css/Header.css">
<script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js" integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ" crossorigin="anonymous"></script>
<script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js" integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<!-- <p class="text-gray font-weight-bold text-uppercase px-3 small pb-4 mb-0">Dashboard</p> -->
<div class="row">
  <div class="col-lg-2 col-md-3 d-md-block">
    <div class="card bg-common card-left">
      <div class="card-body">
        <nav class="nav d-block card-header-tabs nav-fill">
          <a data-toggle="tab" class="nav-link text-dark text-center" aria-current="page" href="#enquiry">Enquiry</a>
          <a data-toggle="tab" class="nav-link text-dark text-center" href="#product">Product</a>
          <a data-toggle="tab" class="nav-link text-dark text-center" href="#reports">Reports</a>
          <a data-toggle="tab" class="nav-link text-dark text-center" href="#accounts">Accounts</a>
        </nav>
      </div>
    </div>
  </div>
  <div class="col-lg-10" style="padding-right: 1px;padding-left: 0px;">
    <div class="card">
      <div class="card-body tab-content border-0">
        <div class="tab-pane active" id="enquiry">
          <nav class="nav nav-tabs bg-dark card-header-tabs nav-fill" style="list-style-type: none;">
            <a data-toggle="tab" class="text-primary text-uppercase mb-1" href="#newenquiry">New Enquiry</a>
            <a data-toggle="tab" class="text-success text-uppercase mb-1" href="#allenquiry" ><span class="text-info">{{total_enquiry_data}}</span> ALl Enquiry</a>
            <a data-toggle="tab" class="text-info text-uppercase mb-1" href="#assenquiry">assigned Enquiry</a>
            <a data-toggle="tab" class="text-gray-100 text-uppercase mb-1" href="#notassenquiry">Not Assigned Enquiry</a>
            <a data-toggle="tab" class="text-warning text-uppercase mb-1" href="#enquiryclosed">Enquiries Closed</a>
          </nav>
          <hr-2>
          <div class="col-lg-10" style="padding-top: -40px;">
            <div class="card" style="width:120%;">
              <div class="card-body tab-content w-120 p-10" style="padding:.5rem;">
                <div class="tab-pane active" id="newenquiry">
                  <div class="col-12">
                      <a class="btn btn-primary  btn-sm btn-block" style="margin-top: -13px; " href="#">&nbsp;</a>
                      <table class="table table-sm" style="padding: 100px; font-size: small;">
                        <tr>
                          <th>Query_id</th>
                          <th>SenderName</th>
                          <th>SenderEmail</th>
                          <th>Subject</th>
                          <th>Date_Time_Re</th>
                          <th>MOB</th>
                          <th>ENQ_MESSAGE</th>
                          <th>ENQ_CITY</th>
                          <th>ENQ_STATE</th>
                          <th>Action</th>
                        </tr>
                
                        {% for i in last_all_enq %}
                        <tr>
                          <td>{{i.QUERY_ID}}</td>
                          <td>{{i.SENDERNAME}}</td>
                          <td>{{i.SENDEREMAIL}}</td>
                          <td>{{i.SUBJECT}}</td>
                          <td>{{i.DATE_TIME_RE}}</td>
                          <td>{{i.MOB}}</td>
                          <td>{{i.ENQ_MESSAGE}}</td>
                          <td>{{i.ENQ_CITY}}</td>
                          <td>{{i.ENQ_STATE}}</td>
                          <td><a data-toggle="modal"  href="{%url 'Enquiry_Update' i.id %}" data-target="#exampleModal">Edit</a><a data-toggle="modal"  href="{%url 'Enquiry_Delete' i.id %}" data-target="#deleteModal">Delete</a></td>
                        </tr>
                        {% endfor %}
                      </table>
                  </div>
                </div>
                <div class="tab-pane" id="allenquiry">
                  <div class="col-12" >
                    <a class="btn btn-primary  btn-sm btn-block" style="margin-top: -13px;" href="#">All Enquiry Data</a>
                    <table class="table table-sm" style="padding: 100px; font-size: small;">
                      <tr>
                        <th>Query_id</th>
                        <th>SenderName</th>
                        <th>SenderEmail</th>
                        <th>Subject</th>
                        <th>Date_Time_Re</th>
                        <th>MOB</th>
                        <th>ENQ_MESSAGE</th>
                        <th>ENQ_CITY</th>
                        <th>ENQ_STATE</th>
                      </tr>
                      {% for i in all_enq %}
                      <tr>
                        <td>{{i.QUERY_ID}}</td>
                        <td>{{i.SENDERNAME}}</td>
                        <td>{{i.SENDEREMAIL}}</td>
                        <td>{{i.SUBJECT}}</td>
                        <td>{{i.DATE_TIME_RE}}</td>
                        <td>{{i.MOB}}</td>
                        <td>{{i.ENQ_MESSAGE}}</td>
                        <td>{{i.ENQ_CITY}}</td>
                        <td>{{i.ENQ_STATE}}</td>
                      </tr>
                      {% endfor %}
                    </table>
                  </div>
                </div>
                <div class="tab-pane" id="allenquiry">
                  <h1>allenquiry here</h1>
                </div>
                <div class="tab-pane" id="assenquiry">
                  <h1>assenquiry here</h1>
                </div>
                <div class="tab-pane" id="notassenquiry">
                  <h1>notassenquiry here</h1>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="tab-pane" id="product">
          this is product
        </div>
        <div class="tab-pane" id="reports">
          this is Reports
        </div>
        <div class="tab-pane" id="accounts">
          this is accounts
        </div>
        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Enquiry Update</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <form action="" method="POST" id="form-data" class="form-signin">
                  {% csrf_token %}
                  <div class="card card-body">
                    <h5 style="text-align: center;">Enquiry Department</h5>
                    <div class="form-label-group"></div>
                    {% for field in form %}
                      <div class="form-label-group">
                        {{ field|as_crispy_field }}
                      </div>
                    {% endfor %}
                    {% if messages %}
                    <div class="messages">
                      {% for message in messages %}
                      <div{% if message.tags %} class="{{ message.tags }}"{% endif %}>
                        <div class="alert alert-danger" role="alert">&nbsp;{{ message }}</div></div>
                      {% endfor %}
                    </div>
                    {% endif %}
                    <div class="form-label-group"></div>
                    <br>
                    <button class="btn btn-lg btn-block text-uppercase" style="background-color: #3e3c3c;"value="Update" type="submit">submit</button>
                    <button class="btn btn-lg  btn-block text-uppercase" style="background-color: #851313;" type="reset">Cancel</button>
                  </div>
                </form>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
              </div>
            </div>
          </div>
        </div>
        <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title"  style="text-align: center;" id="deleteModalLabel">Enquiry Delete</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <form method="POST">
                  {% csrf_token %}
                  <h1 style="text-align: center;color: black; font-size: small; font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;">Are you sure you want to Delete Enquiry </h1>
                  <h3 style="color: red; text-align: center;">"{{ obj_delete }}" ?</h5>
               
              </div>
              <div class="modal-footer">
                <button type="submit" class="btn btn-danger" value="Submit" style="text-align: center;">submit</button>
              </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
<script>
  jQuery('.modal-dialog .calendar').datepicker({ dateFormat: "yy-mm-dd" });

      var form_options = {
          target: '#deleteModal',
          success: function() {  }
      }
      $('#form-data').ajaxForm(form_options);
</script>